"use strict";THREE.OrbitAndPanControls=function(e,t){function n(){return 2*Math.PI/60/60*d.autoRotateSpeed}function o(){return Math.pow(.95,d.zoomSpeed)}function a(e){if(d.enabled!==!1){if(e.preventDefault(),0===e.button){if(d.noRotate===!0)return;V=P.ROTATE,m.set(e.clientX,e.clientY)}else if(1===e.button){if(d.noZoom===!0)return;V=P.DOLLY,g.set(e.clientX,e.clientY)}else if(2===e.button){if(d.noPan===!0)return;V=P.PAN,T.set(e.clientX,e.clientY)}document.addEventListener("mousemove",i,!1),document.addEventListener("mouseup",s,!1)}}function i(e){if(d.enabled!==!1)if(e.preventDefault(),V===P.ROTATE){if(d.noRotate===!0)return;p.set(e.clientX,e.clientY),f.subVectors(p,m),d.rotateLeft(2*Math.PI*f.x/d.domElement.width*d.rotateSpeed),d.rotateUp(2*Math.PI*f.y/d.domElement.height*d.rotateSpeed),m.copy(p)}else if(V===P.DOLLY){if(d.noZoom===!0)return;O.set(e.clientX,e.clientY),R.subVectors(O,g),R.y>0?d.dollyIn():d.dollyOut(),g.copy(O)}else if(V===P.PAN){if(d.noPan===!0)return;b.set(e.clientX,e.clientY),v.subVectors(b,T),d.pan(v),T.copy(b)}}function s(){d.enabled!==!1&&(document.removeEventListener("mousemove",i,!1),document.removeEventListener("mouseup",s,!1),V=P.NONE)}function c(e){if(e.preventDefault(),d.enabled!==!1&&d.noZoom!==!0){var t=0;e.wheelDelta?t=e.wheelDelta:e.detail&&(t=-e.detail),t>0?d.dollyOut():d.dollyIn()}}function r(e){if(d.enabled!==!1&&d.noKeys!==!0&&d.noPan!==!0)switch(e.keyCode){case d.keys.UP:d.pan(new THREE.Vector2(0,1));break;case d.keys.BOTTOM:d.pan(new THREE.Vector2(0,-1));break;case d.keys.LEFT:d.pan(new THREE.Vector2(1,0));break;case d.keys.RIGHT:d.pan(new THREE.Vector2(-1,0))}}function h(e){if(d.enabled!==!1)switch(e.touches.length){case 1:if(d.noRotate===!0)return;V=P.TOUCH_ROTATE,m.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(d.noZoom===!0)return;V=P.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);g.set(0,o);break;case 3:if(d.noPan===!0)return;V=P.TOUCH_PAN,T.set(e.touches[0].pageX,e.touches[0].pageY);break;default:V=P.NONE}}function l(e){if(d.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(d.noRotate===!0)return;if(V!==P.TOUCH_ROTATE)return;p.set(e.touches[0].pageX,e.touches[0].pageY),f.subVectors(p,m),d.rotateLeft(2*Math.PI*f.x/d.domElement.width*d.rotateSpeed),d.rotateUp(2*Math.PI*f.y/d.domElement.height*d.rotateSpeed),m.copy(p);break;case 2:if(d.noZoom===!0)return;if(V!==P.TOUCH_DOLLY)return;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);O.set(0,o),R.subVectors(O,g),R.y>0?d.dollyOut():d.dollyIn(),g.copy(O);break;case 3:if(d.noPan===!0)return;if(V!==P.TOUCH_PAN)return;b.set(e.touches[0].pageX,e.touches[0].pageY),v.subVectors(b,T),d.pan(v),T.copy(b);break;default:V=P.NONE}}function u(){d.enabled!==!1&&(V=P.NONE)}THREE.EventDispatcher.call(this),this.enabled=!0,this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minDistance=0,this.maxDistance=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var d=this,E=1e-6,m=new THREE.Vector2,p=new THREE.Vector2,f=new THREE.Vector2,T=new THREE.Vector2,b=new THREE.Vector2,v=new THREE.Vector2,g=new THREE.Vector2,O=new THREE.Vector2,R=new THREE.Vector2,y=0,L=0,w=1,H=new THREE.Vector3,M=new THREE.Vector3,P={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},V=P.NONE,N={type:"change"};this.rotateLeft=function(e){void 0===e&&(e=n()),L-=e},this.rotateUp=function(e){void 0===e&&(e=n()),y-=e},this.panLeft=function(e){var t=new THREE.Vector3,n=this.object.matrix.elements;t.set(n[0],n[1],n[2]),t.multiplyScalar(-e),H.add(t)},this.panUp=function(e){var t=new THREE.Vector3,n=this.object.matrix.elements;t.set(n[4],n[5],n[6]),t.multiplyScalar(e),H.add(t)},this.pan=function(e){if(void 0!==d.object.fov){var t=d.object.position,n=t.clone().sub(d.target),o=n.length();o*=Math.tan(d.object.fov/2*Math.PI/180),d.panLeft(2*e.x*o/d.domElement.height),d.panUp(2*e.y*o/d.domElement.height)}else void 0!==d.object.top?(d.panLeft(e.x*(d.object.right-d.object.left)/d.domElement.width),d.panUp(e.y*(d.object.top-d.object.bottom)/d.domElement.height)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=o()),w/=e},this.dollyOut=function(e){void 0===e&&(e=o()),w*=e},this.update=function(){var e=this.object.position,t=e.clone().sub(this.target),o=Math.atan2(t.x,t.z),a=Math.atan2(Math.sqrt(t.x*t.x+t.z*t.z),t.y);this.autoRotate&&this.rotateLeft(n()),o+=L,a+=y,a=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,a)),a=Math.max(E,Math.min(Math.PI-E,a));var i=t.length()*w;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),this.target.add(H),t.x=i*Math.sin(a)*Math.sin(o),t.y=i*Math.cos(a),t.z=i*Math.sin(a)*Math.cos(o),e.copy(this.target).add(t),this.object.lookAt(this.target),L=0,y=0,w=1,H.set(0,0,0),M.distanceTo(this.object.position)>0&&(this.dispatchEvent(N),M.copy(this.object.position))},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",a,!1),this.domElement.addEventListener("mousewheel",c,!1),this.domElement.addEventListener("DOMMouseScroll",c,!1),this.domElement.addEventListener("keydown",r,!1),this.domElement.addEventListener("touchstart",h,!1),this.domElement.addEventListener("touchend",u,!1),this.domElement.addEventListener("touchmove",l,!1)};